{% extends "base.html" %}

{% block title %}Space Ontology - Home{% endblock %}

{% block content %}
<section class="hero">
	<h1 class="hero-title">Space Ontology</h1>
	<p class="hero-subtitle">Explore the universe through semantic technologies and
		discover relationships between celestial bodies, space missions, and more</p>

	<div style="display: flex; gap: 1rem; justify-content: center;">
		<button id="createOntologyBtn" class="btn btn-primary">
			<i class="bi bi-rocket-takeoff"></i>
			<span>Generate Ontology</span>
		</button>
		<a href="/explore" class="btn btn-secondary">
			<i class="bi bi-search"></i>
			<span>Start Exploring</span>
		</a>
	</div>
</section>

<section class="slide-up" style="animation-delay: 0.1s;">
	<div class="grid grid-2">
		<div class="card">
			<div class="card-header">
				<h2 class="card-header-title">
					<i class="bi bi-info-circle"></i>
					<span>About the Project</span>
				</h2>
			</div>
			<div class="card-body">
				<p>This project uses semantic technologies to represent and explore
					knowledge about space, including:</p>

				<div
					style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
					<div>
						<div style="display: flex; align-items: center; margin-bottom: 0.75rem;">
							<i class="bi bi-circle-fill"
								style="color: var(--accent); font-size: 0.5rem; margin-right: 0.75rem;"></i>
							<span>Celestial bodies</span>
						</div>
						<div style="display: flex; align-items: center; margin-bottom: 0.75rem;">
							<i class="bi bi-circle-fill"
								style="color: var(--accent); font-size: 0.5rem; margin-right: 0.75rem;"></i>
							<span>Space missions</span>
						</div>
						<div style="display: flex; align-items: center;">
							<i class="bi bi-circle-fill"
								style="color: var(--accent); font-size: 0.5rem; margin-right: 0.75rem;"></i>
							<span>Astronauts</span>
						</div>
					</div>
					<div>
						<div style="display: flex; align-items: center; margin-bottom: 0.75rem;">
							<i class="bi bi-circle-fill"
								style="color: var(--accent); font-size: 0.5rem; margin-right: 0.75rem;"></i>
							<span>Space agencies</span>
						</div>
						<div style="display: flex; align-items: center; margin-bottom: 0.75rem;">
							<i class="bi bi-circle-fill"
								style="color: var(--accent); font-size: 0.5rem; margin-right: 0.75rem;"></i>
							<span>Spacecraft</span>
						</div>
						<div style="display: flex; align-items: center;">
							<i class="bi bi-circle-fill"
								style="color: var(--accent); font-size: 0.5rem; margin-right: 0.75rem;"></i>
							<span>Galaxies</span>
						</div>
					</div>
				</div>

				<p>The ontology was created using RDFLib and data was obtained from real
					APIs:</p>

				<div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem;">
					<span class="api-tag">Solar System OpenData</span>
					<span class="api-tag">SpaceX</span>
					<span class="api-tag">NASA</span>
					<span class="api-tag">Exoplanet Archive</span>
					<span class="api-tag">Wikipedia</span>
				</div>
			</div>
			<div style="text-align: center;">
				<img
					src="https://science.nasa.gov/wp-content/uploads/2023/04/hubbleimage1p1611a1r-jpg.webp?resize=500,225"
					alt="NASA, ESA and the Hubble Heritage"
					style="max-width: 100%; border-radius: 0.5rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);" />
				<p
					style="font-size: 0.875rem; color: var(--text-tertiary); margin-top: 0.5rem;">
					Image Credit: NASA, ESA, and the Hubble Heritage Team (STScI/AURA)
				</p>
			</div>

		</div>

		<div class="card">
			<div class="card-header">
				<h2 class="card-header-title">
					<i class="bi bi-stars"></i>
					<span>Features</span>
				</h2>
			</div>
			<div class="card-body">
				<div class="grid grid-2" style="gap: 1rem;">
					<div class="feature-card">
						<div class="feature-icon">
							<i class="bi bi-search"></i>
						</div>
						<h3 class="feature-title">Explore</h3>
						<p class="feature-description">Browse classes and instances in the
							ontology</p>
					</div>

					<div class="feature-card">
						<div class="feature-icon">
							<i class="bi bi-diagram-3"></i>
						</div>
						<h3 class="feature-title">Visualize</h3>
						<p class="feature-description">See relationships in an interactive
							graph</p>
					</div>

					<div class="feature-card">
						<div class="feature-icon">
							<i class="bi bi-code-slash"></i>
						</div>
						<h3 class="feature-title">Query</h3>
						<p class="feature-description">Run custom SPARQL queries</p>
					</div>

					<div class="feature-card">
						<div class="feature-icon">
							<i class="bi bi-database"></i>
						</div>
						<h3 class="feature-title">Store</h3>
						<p class="feature-description">File system or GraphDB</p>
					</div>
				</div>

				<div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
					<a href="/explore" class="btn btn-secondary" style="flex: 1;">
						<i class="bi bi-search"></i>
						<span>Explore</span>
					</a>
					<a href="/sparql" class="btn btn-secondary" style="flex: 1;">
						<i class="bi bi-code-slash"></i>
						<span>SPARQL</span>
					</a>
					<a href="/graph" class="btn btn-secondary" style="flex: 1;">
						<i class="bi bi-diagram-3"></i>
						<span>Graph</span>
					</a>
				</div>

				<div style="text-align: center; margin-top: 1.5rem;">
					<span style="color: var(--text-tertiary); font-size: 0.875rem;">
						Current persistence: <strong>{{ persistence.method|capitalize }}</strong>
						{% if persistence.method == 'graphdb' %}({{ persistence.graphdb_url }}){%
						endif %}
					</span>
				</div>
			</div>
		</div>
	</div>
</section>

<section class="slide-up" style="animation-delay: 0.2s; margin-top: 2rem;">
	<div class="card">
		<div class="card-header">
			<h2 class="card-header-title">
				<i class="bi bi-rocket"></i>
				<span>Quick Start Guide</span>
			</h2>
		</div>
		<div class="card-body">
			<div class="steps">
				<div class="step">
					<div class="step-number">1</div>
					<h3 class="step-title">Generate</h3>
					<p class="step-description">Create the ontology with data from various
						space APIs</p>
				</div>

				<div class="step">
					<div class="step-number">2</div>
					<h3 class="step-title">Explore</h3>
					<p class="step-description">Browse through classes, instances and their
						properties</p>
				</div>

				<div class="step">
					<div class="step-number">3</div>
					<h3 class="step-title">Query</h3>
					<p class="step-description">Write SPARQL queries to extract specific
						information</p>
				</div>

				<div class="step">
					<div class="step-number">4</div>
					<h3 class="step-title">Visualize</h3>
					<p class="step-description">See the relationships between entities
						graphically</p>
				</div>
			</div>
		</div>
	</div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const createOntologyBtn = document.getElementById('createOntologyBtn');
        
        if (createOntologyBtn) {
            createOntologyBtn.addEventListener('click', function() {
                this.disabled = true;
                this.innerHTML = '<div class="spinner"></div><span style="margin-left: 0.5rem;">Generating...</span>';
                
                fetch('/create-ontology', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                })
                .then(response => {
                    if (!response.ok) {
                        return response.json().then(data => {
                            throw new Error(data.message || 'Unknown error');
                        });
                    }
                    return response.json();
                })
                .then(data => {
                    const alert = document.createElement('div');
                    alert.className = 'alert alert-success';
                    alert.innerHTML = '<i class="bi bi-check-circle"></i><span>Ontology created successfully!</span>';
                    
                    createOntologyBtn.parentNode.insertBefore(alert, createOntologyBtn.nextSibling);
                    
                    createOntologyBtn.innerHTML = '<i class="bi bi-check-circle"></i><span>Ontology Generated</span>';
                    createOntologyBtn.classList.remove('btn-primary');
                    createOntologyBtn.classList.add('btn-success');
                    
                    setTimeout(() => {
                        alert.style.opacity = '0';
                        setTimeout(() => alert.remove(), 500);
                    }, 5000);
                })
                .catch(error => {
                    const alert = document.createElement('div');
                    alert.className = 'alert alert-danger';
                    alert.innerHTML = `<i class="bi bi-exclamation-triangle"></i><span>Error: ${error.message}</span>`;
                    
                    createOntologyBtn.parentNode.insertBefore(alert, createOntologyBtn.nextSibling);
                    
                    createOntologyBtn.disabled = false;
                    createOntologyBtn.innerHTML = '<i class="bi bi-arrow-repeat"></i><span>Try Again</span>';
                    
                    setTimeout(() => {
                        alert.style.opacity = '0';
                        setTimeout(() => alert.remove(), 500);
                    }, 5000);
                });
            });
        }
    });
</script>
{% endblock %}